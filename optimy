from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

#PATH = "/Users/admin/Downloads/chromedriver-mac-arm64/chromedriver"
url = webdriver.Chrome()
url.get("https://qrqck8u5t9co.front.staging.optimy.net/en/")



failcatcher = "no"
try:
    #wait for the dialog to appear
    main = WebDriverWait(url, 5).until(
            EC.presence_of_element_located((By.CLASS_NAME, "ui-dialog"))
        )
    #click close button
    closeDialog = main.find_element(By.CLASS_NAME, "closeButton").click()

    
    #wait for the submit an application button to load
    main = WebDriverWait(url, 5).until(
            EC.presence_of_element_located((By.CLASS_NAME, "sponsorFrontendHome"))
        )
    #click on the submit button
    clickSubmitButton = main.find_element(By.ID, "homeSubmitProjectButton").click()

    #wait for the login page to appear
    main = WebDriverWait(url, 5).until(
            EC.presence_of_element_located((By.ID, "content"))
        )
    
    #input in the input box and press enter
    optiLogin = main.find_element(By.ID, "loginEmail")
    optiLogin.send_keys("optimyautomationtester@gmail.com")
    optiPass = main.find_element(By.ID, "loginPassword")
    optiPass.send_keys("2MsWseoj")
    optiPass.send_keys(Keys.RETURN)

    #wait for the Continue with the submission of an application page to load 
    main = WebDriverWait(url, 10).until(
            EC.presence_of_element_located((By.CLASS_NAME, "submit"))
        )
    #If “Continue with the submission of the application” is present, click “Submit a new application button at the bottom
    find_text = main.get_attribute("value")
 
    #compare if no button or has button
    if(find_text == "Continue with the submission of the application"):
        main = WebDriverWait(url, 10).until(
            EC.presence_of_element_located((By.CLASS_NAME, "submitNew"))
        )
        submitNew = main.find_element(By.LINK_TEXT, "Submit a new application")
        submitNew.click()
        time.sleep(1000)

        #wait for the fill-out form to load
        """"
        main = WebDriverWait(url, 10).until(
            EC.presence_of_element_located((By.ID, "projectForm"))
        )
        #input form
        firstname = main.find_element(By.ID, "loginEmail")   
        lastname = main.find_element(By.ID, "loginEmail") 
        extension = main.find_element(By.ID, "loginEmail") 
        address = main.find_element(By.ID, "loginEmail") 
        postalcode = main.find_element(By.ID, "loginEmail") 
        country = main.find_element(By.ID, "loginEmail") 
        photo = main.find_element(By.ID, "loginEmail") 
        gender = main.find_element(By.ID, "loginEmail") 
        role = main.find_element(By.ID, "loginEmail") 
        familiarity = main.find_element(By.ID, "loginEmail") 
        objective = main.find_element(By.ID, "loginEmail") 
        """


    else:
        #put code here kapag walang button
        main = WebDriverWait(url, 10).until(
            EC.presence_of_element_located((By.CLASS_NAME, "submitNew"))
        )
        submitNew = main.find_element(By.LINK_TEXT, "Submit a new application")
        submitNew.click()
        time.sleep(10)






    
    
  
except:
   print("wac")

